(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[31],{106:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return a}));var r=function(e,t,n,r){var a=new Intl.NumberFormat(r,{style:"currency",currency:t}),c=a.formatToParts(0).find((function(e){return"currency"===e.type})).value;return a.format(e).replace(c,n)},a=navigator.language||navigator.userLanguage},110:function(e,t,n){"use strict";n(0);var r=n(132),a=n(1),c=function(e){var t=e.title;return Object(a.jsx)(r.a,{children:Object(a.jsx)("title",{children:t})})};c.defaultProps={title:"Welcome To Foody"},t.a=c},143:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"b",(function(){return d})),n.d(t,"d",(function(){return l})),n.d(t,"c",(function(){return j})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return b}));var r=n(5),a=n(15),c=n(93),s=n.n(c),i=n(12),o=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a,c){var o,d,l,j,u;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:i.f}),o=c(),d=o.userLogIn.userInfo,l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},n.next=6,s.a.post("/api/order",{paymentIntent:e,paymentMethod:t},l);case 6:j=n.sent,u=j.data,a({type:i.h,payload:u}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:i.e,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},d=function(e){return function(){var t=Object(a.a)(Object(r.a)().mark((function t(n,a){var c,o,d,l,j;return Object(r.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:i.j}),c=a(),o=c.userLogIn.userInfo,d={headers:{Authorization:"Bearer ".concat(o.token)}},t.next=6,s.a.get("/api/order/".concat(e),d);case 6:l=t.sent,j=l.data,n({type:i.l,payload:j}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:i.i,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},l=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n){var a,c,o,d,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:i.v}),a=n(),c=a.userLogIn.userInfo,o={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,s.a.get("/api/order",o);case 6:d=e.sent,l=d.data,t({type:i.x,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:i.u,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},j=function(){return function(){var e=Object(a.a)(Object(r.a)().mark((function e(t,n){var a,c,o,d,l;return Object(r.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:i.b}),a=n(),c=a.userLogIn.userInfo,o={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,s.a.get("/api/admin/orderlist",o);case 6:d=e.sent,l=d.data,t({type:i.d,payload:l}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:i.a,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()},u=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a,c){var o,d,l;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:i.n}),o=c(),d=o.userLogIn.userInfo,l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},n.next=6,s.a.put("/api/admin/orderStatus/".concat(e),{status:t},l);case 6:a({type:i.p}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a({type:i.m,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()},b=function(e,t){return function(){var n=Object(a.a)(Object(r.a)().mark((function n(a,c){var o,d,l;return Object(r.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:i.r}),o=c(),d=o.userLogIn.userInfo,l={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(d.token)}},n.next=6,s.a.put("/api/admin/paymentStatus/".concat(e),{status:t},l);case 6:a({type:i.t}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a({type:i.q,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e,t){return n.apply(this,arguments)}}()}},164:function(e,t,n){"use strict";var r=n(2),a=n(10),c=n(38),s=n(39),i=n.n(s),o=n(0),d=n(122),l=n(40),j=n(1),u=["as","bsPrefix","variant","size","active","disabled","className"],b=o.forwardRef((function(e,t){var n=e.as,s=e.bsPrefix,o=e.variant,b=void 0===o?"primary":o,p=e.size,h=e.active,x=void 0!==h&&h,O=e.disabled,m=void 0!==O&&O,y=e.className,f=Object(c.a)(e,u),g=Object(l.c)(s,"btn"),v=Object(d.b)(Object(r.a)({tagName:n,disabled:m},f)),k=Object(a.a)(v,2),T=k[0],S=k[1].tagName;return Object(j.jsx)(S,Object(r.a)(Object(r.a)(Object(r.a)({},T),f),{},{ref:t,disabled:m,className:i()(y,g,x&&"active",b&&"".concat(g,"-").concat(b),p&&"".concat(g,"-").concat(p),f.href&&m&&"disabled")}))}));b.displayName="Button",t.a=b},313:function(e,t,n){"use strict";n(0);var r=n(214),a=n(380),c=n(1),s=r.StyleSheet.create({body:{paddingTop:35,paddingBottom:65,paddingHorizontal:35},title:{fontSize:24,textAlign:"center"},author:{fontSize:12,textAlign:"center",marginBottom:40},subtitle:{fontSize:18,marginTop:8,marginRight:12,marginLeft:12,marginBottom:0},text:{margin:12,fontSize:14,textAlign:"justify"},image:{marginVertical:15,marginHorizontal:100},header:{fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},footer:{padding:"100px",fontSize:12,marginBottom:20,textAlign:"center",color:"grey"},pageNumber:{position:"absolute",fontSize:12,bottom:30,left:0,right:0,textAlign:"center",color:"grey"}});t.a=function(e){var t,n=e.order;return Object(c.jsx)(r.Document,{children:Object(c.jsxs)(r.Page,{style:s.body,children:[Object(c.jsxs)(r.Text,{style:s.header,fixed:!0,children:["~ ",(new Date).toLocaleString()," ~"]}),Object(c.jsx)(r.Text,{style:s.title,children:"Order Invoice"}),Object(c.jsx)(r.Text,{style:s.author,children:"React Redux Ecommerce - FoodStore"}),Object(c.jsx)(r.Text,{style:s.subtitle,children:"Order Summary"}),Object(c.jsx)(a.Table,{children:Object(c.jsxs)(a.TableHeader,{children:[Object(c.jsx)(a.TableCell,{children:"Title"}),Object(c.jsx)(a.TableCell,{children:"Price"}),Object(c.jsx)(a.TableCell,{children:"Quantity"}),Object(c.jsx)(a.TableCell,{children:"Sub Total"})]})}),Object(c.jsx)(a.Table,{data:n.products,children:Object(c.jsxs)(a.TableBody,{children:[Object(c.jsx)(a.DataTableCell,{getContent:function(e){return e.product.title}}),Object(c.jsx)(a.DataTableCell,{getContent:function(e){return"$".concat(e.price)}}),Object(c.jsx)(a.DataTableCell,{getContent:function(e){return e.quantity}}),Object(c.jsx)(a.DataTableCell,{getContent:function(e){return"$".concat(e.price*e.quantity)}})]})}),Object(c.jsxs)(r.Text,{style:s.text,children:[Object(c.jsxs)(r.Text,{children:["Date: ","                                               ",new Date(n.createdAt).toLocaleString()]}),"\n",Object(c.jsxs)(r.Text,{children:["Order Id: ","                                         ",n._id]}),"\n",Object(c.jsxs)(r.Text,{children:["Order Status: ","                                  ",n.orderStatus]}),"\n",Object(c.jsxs)(r.Text,{children:["Payment Method: ","                           ",n.paymentMethod]}),"\n",Object(c.jsxs)(r.Text,{children:["Payment Status: ","                             ",null===(t=n.paymentIntent)||void 0===t?void 0:t.status]}),"\n",Object(c.jsxs)(r.Text,{children:["Discount Applied: ","                           ",n.couponApplied?"Yes":"No"]}),"\n",n.couponApplied?Object(c.jsxs)(r.Text,{children:["Total Paid On Discount: ","                  ","$",n.paymentIntent&&n.paymentIntent.amount/100]}):Object(c.jsxs)(r.Text,{children:["Total Paid: ","                                      ","$",n.paymentIntent&&n.paymentIntent.amount/100]})]}),Object(c.jsx)(r.Text,{style:s.footer,children:" ~ Thank you for shopping with us ~ "})]})})}},347:function(e,t){},348:function(e,t){},363:function(e,t){},366:function(e,t){},367:function(e,t){},588:function(e,t,n){"use strict";n.r(t);var r=n(10),a=n(0),c=n(50),s=n(143),i=n(12),o=n(127),d=n(118),l=n(196),j=n(83),u=n(272),b=n(111),p=n(164),h=n(214),x=n(88),O=n(92),m=n(4),y=n(51),f=n(313),g=n(110),v=n(106),k=n(1);t.default=function(){var e,t,n,T,S,I,C,P,w,N,D,z,A=Object(a.useState)(""),B=Object(r.a)(A,2),F=B[0],L=B[1],M=Object(c.b)(),q=Object(m.D)(),E=Object(m.I)().id,R=Object(c.c)((function(e){return e.userLogIn})).userInfo,W=Object(c.c)((function(e){return e.orderDetails})),$=W.loading,_=W.order,H=W.error,J=Object(c.c)((function(e){return e.orderStatusUpdate})),U=J.loading,G=J.success,Q=J.error,V=Object(c.c)((function(e){return e.paymentStatusUpdate})),Y=(V.loading,V.success),K=(V.error,Object(c.c)((function(e){return e.orderCreate}))),X=(K.order,K.success,K.loading,K.error);Object(a.useEffect)((function(){R||q("/login"),(!_||_._id!==E||G||Y)&&(M(Object(s.b)(E)),M({type:i.g}),M({type:i.o}),M({type:i.s}))}),[R,E,_,M,G,Y,q]);return $?Object(k.jsx)(O.a,{}):H?Object(k.jsx)(x.a,{variant:"danger",children:H}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(g.a,{title:"Food Store | Pay Order"}),R&&"admin"!==R.role&&Object(k.jsx)(y.Link,{to:"/user/orderhistory",className:"btn btn-dark my-3",children:"Go Back"}),Object(k.jsxs)("h3",{children:["Order: ",_._id]}),Object(k.jsxs)(o.a,{className:"orderDetails",children:[Object(k.jsx)(d.a,{md:8,children:Object(k.jsxs)(l.a,{style:{backgroundColor:"#ced6e0"},children:[Object(k.jsx)(l.a.Item,{children:Object(k.jsxs)(o.a,{className:"d-flex flex-lg-row flex-md-row flex-sm-column flex-xs-column",children:[Object(k.jsxs)(d.a,{children:[Object(k.jsx)("h4",{children:"Shipping"}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Name: "})," ",null===(e=_.orderdBy)||void 0===e?void 0:e.name]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Email: "})," ",Object(k.jsx)("a",{href:"mailto:".concat(null===(t=_.orderdBy)||void 0===t?void 0:t.email),children:null===(n=_.orderdBy)||void 0===n?void 0:n.email})]}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Address:"}),null===(T=_.orderdBy)||void 0===T?void 0:T.shipping.address,","," ",null===(S=_.orderdBy)||void 0===S?void 0:S.shipping.city," ",null===(I=_.orderdBy)||void 0===I?void 0:I.shipping.postcode,","," ",null===(C=_.orderdBy)||void 0===C?void 0:C.shipping.country]})]}),Object(k.jsx)(d.a,{className:"d-flex justify-content-md-end align-items-start justify-content-sm-start",children:Object(k.jsx)(h.PDFDownloadLink,{document:Object(k.jsx)(f.a,{order:_}),fileName:"invoice.pdf",className:"btn btn-sm btn-primary",children:"Download Invoice"})})]})}),Object(k.jsxs)(l.a.Item,{children:[Object(k.jsx)("h4",{children:"Order Status"}),_.orderStatus&&"Not Processed"===_.orderStatus?Object(k.jsx)(x.a,{variant:"dark",children:"Not Processed"}):"Processing"===_.orderStatus?Object(k.jsx)(x.a,{variant:"info",children:"Processing"}):"Dispatched"===_.orderStatus?Object(k.jsx)(x.a,{variant:"warning",children:"Dispatched"}):"Completed"===_.orderStatus?Object(k.jsx)(x.a,{variant:"success",children:"Completed"}):Object(k.jsx)(x.a,{variant:"danger",children:"Cancelled"})]}),Object(k.jsxs)(l.a.Item,{children:[Object(k.jsx)("h4",{children:"Payment Method"}),Object(k.jsxs)("p",{children:[Object(k.jsx)("strong",{children:"Method: "}),_.paymentMethod]}),_.paymentIntent&&"succeeded"===(null===(P=_.paymentIntent)||void 0===P?void 0:P.status)?Object(k.jsxs)(x.a,{variant:"success",children:["Paid on : ",new Date(_.createdAt).toLocaleDateString()]}):"pending"===(null===(w=_.paymentIntent)||void 0===w?void 0:w.status)?Object(k.jsx)(x.a,{variant:"dark",children:"Pending"}):Object(k.jsx)(x.a,{variant:"danger",children:"Error Payment, please contact site owner"})]}),Object(k.jsxs)(l.a.Item,{children:[Object(k.jsx)("h4",{children:"Order Items"}),0===(null===(N=_.products)||void 0===N?void 0:N.length)?Object(k.jsx)(x.a,{children:"Order is empty"}):Object(k.jsx)(l.a,{children:null===(D=_.products)||void 0===D?void 0:D.map((function(e,t){var n;return Object(k.jsx)(l.a.Item,{children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(d.a,{md:2,children:Object(k.jsx)(j.a,{src:e.product.image.url,alt:e.product.title,fluid:!0})}),Object(k.jsx)(d.a,{md:10,children:Object(k.jsxs)(o.a,{className:"d-flex flex-column",children:[Object(k.jsx)(d.a,{children:Object(k.jsxs)(o.a,{className:"d-flex flex-row",children:[Object(k.jsxs)(d.a,{md:9,children:[Object(k.jsxs)("span",{style:{fontWeight:"900"},children:[t+1,")"," "]}),Object(k.jsxs)("span",{style:{fontWeight:"600"},children:[Object(k.jsx)(y.Link,{to:"/product/".concat(e.product.slug),children:e.product.title})," ","x ",e.qty]})]}),Object(k.jsx)(d.a,{md:3,children:Object(k.jsxs)("span",{style:{fontWeight:"600"},children:["=",Object(v.a)(e.qty*e.price.price,e.price.currency,e.price.currencySymbol,v.b)]})})]})}),e.variableData&&Object(k.jsxs)(d.a,{children:[Object(k.jsx)("span",{style:{fontSize:"14px"},children:"Type:"})," ",Object(k.jsx)(u.a,{style:{backgroundColor:"#b33939",marginLeft:"2px"},children:e.variableData.name})]}),(null===(n=e.addonData)||void 0===n?void 0:n.length)>0&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)(d.a,{children:[Object(k.jsx)("span",{style:{fontSize:"14px"},children:"Addons:"})," ",e.addonData.map((function(e){return Object(k.jsx)(u.a,{style:{backgroundColor:"#FFC107",marginLeft:"2px"},children:e.name.split("-")[0]},e._id)}))]}),Object(k.jsxs)(d.a,{children:["Total Addon:"," ",Object(v.a)(e.addonData.reduce((function(e,t){return e+t.prices.reduce((function(e,t){return e+t.price}),0)}),0),e.price.currency,e.price.currencySymbol,v.b)]})]})]})})]})},t)}))})]})]})}),Object(k.jsxs)(d.a,{md:4,children:[Object(k.jsxs)(l.a,{style:{backgroundColor:"#ced6e0"},children:[Object(k.jsx)(l.a.Item,{children:Object(k.jsx)("h4",{children:"Order Summary"})}),_.couponApplied?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(l.a.Item,{children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(d.a,{children:Object(k.jsx)("b",{children:"Total: "})}),Object(k.jsx)(d.a,{children:Object(k.jsx)("del",{children:Object(v.a)(_.cartTotal,_.currency&&_.currency.currency,_.currency&&_.currency.currencySymbol,v.b)})})]})}),Object(k.jsx)(l.a.Item,{children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(d.a,{children:Object(k.jsx)("b",{children:"Total After Discount:"})}),Object(k.jsxs)(d.a,{children:[_.currency&&_.currency.currencySymbol,_.totalAfterDiscount]})]})}),Object(k.jsx)(l.a.Item,{children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(d.a,{children:Object(k.jsx)("b",{children:"Total Payable: "})}),Object(k.jsx)(d.a,{children:_.currency&&Object(v.a)(_.totalAfterDiscount,_.currency.currency,_.currency.currencySymbol,v.b)})]})})]}):Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(l.a.Item,{children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(d.a,{children:Object(k.jsx)("b",{children:"Total: "})}),Object(k.jsx)(d.a,{children:_.currency&&Object(v.a)(_.cartTotal,_.currency.currency,_.currency.currencySymbol,v.b)})]})}),Object(k.jsx)(l.a.Item,{children:Object(k.jsxs)(o.a,{children:[Object(k.jsx)(d.a,{children:Object(k.jsx)("b",{children:"Total Payable: "})}),Object(k.jsx)(d.a,{children:_.currency&&Object(v.a)(_.cartTotal,_.currency.currency,_.currency.currencySymbol,v.b)})]})})]})]}),_.paymentIntent&&"succeeded"!==(null===(z=_.paymentIntent)||void 0===z?void 0:z.status)&&Object(k.jsx)(l.a,{className:"m-2",children:Object(k.jsxs)(l.a.Item,{children:[U&&Object(k.jsx)(O.a,{className:"size-sm"}),Q&&Object(k.jsx)(x.a,{variant:"danger",children:Q}),Object(k.jsx)(d.a,{className:"m-1",children:Object(k.jsx)(l.a,{children:Object(k.jsxs)(l.a.Item,{children:[Object(k.jsx)("h6",{children:"Payment Method:"}),Object(k.jsx)(b.a.Check,{type:"radio",label:"Stripe Payment",id:"Stripe",name:"paymentMethod",value:"Stripe",onChange:function(e){return L(e.target.value)}}),Object(k.jsx)(b.a.Check,{type:"radio",label:"Paystrack Payment",id:"Paystack",name:"paymentMethod",value:"Paystack",onChange:function(e){return L(e.target.value)}}),Object(k.jsx)(b.a.Check,{type:"radio",label:"Flutterwave Payment",id:"Flutterwave",name:"paymentMethod",value:"Flutterwave",onChange:function(e){return L(e.target.value)}}),Object(k.jsx)(b.a.Check,{type:"radio",label:"Cash On Delivery",id:"Cod",name:"paymentMethod",value:"Cod",onChange:function(e){return L(e.target.value)}})]})})}),Object(k.jsx)(d.a,{children:Object(k.jsxs)(l.a.Item,{children:[F&&"Stripe"===F?Object(k.jsx)(p.a,{disabled:R&&!R.shipping,variant:R&&!R.shipping?"dark":"success",className:"m-2",onClick:function(){return q("/placeorder/".concat(F,"/").concat(E))},children:"Place Order (Stripe)"}):"Cod"===F?Object(k.jsx)(p.a,{disabled:R&&!R.shipping,variant:R&&!R.shipping?"dark":"success",className:"m-2",onClick:function(){},children:$?Object(k.jsx)(O.a,{className:"size-sm"}):"Place Order (Paystack)"}):"Paystack"===F?Object(k.jsx)(p.a,{disabled:R&&!R.shipping,variant:R&&!R.shipping?"dark":"success",className:"m-2",onClick:function(){return q("/placeorder/".concat(F,"/").concat(E))},children:"Place Order (Paystack)"}):"Flutterwave"===F?Object(k.jsx)(p.a,{disabled:R&&!R.shipping,variant:R&&!R.shipping?"dark":"success",className:"m-2",onClick:function(){return q("/placeorder/".concat(F,"/").concat(E))},children:"Place Order (Flutterwave)"}):Object(k.jsx)(p.a,{disabled:!0,className:"m-3",variant:"dark",children:"No Payment Method Selected"}),X&&Object(k.jsx)(x.a,{variant:"danger",children:X})]})})]})})]})]})]})}},88:function(e,t,n){"use strict";n(0);var r=n(134),a=n(1);t.a=function(e){var t=e.children,n=e.variant;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(r.a,{variant:n,children:t})})}},92:function(e,t,n){"use strict";n(0);var r=n(131),a=n(1),c=function(e){var t=e.size;return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(r.a,{animation:"grow",variant:"dark",className:t})})};c.defaultProps={size:"size-md"},t.a=c}}]);
//# sourceMappingURL=31.e984db9c.chunk.js.map